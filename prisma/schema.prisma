// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Customer {
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  firstName String
  lastName  String
  phone     String
  address   Address?
  addressId Int
  code String?
  @@id([firstName, lastName])
}

model Address {
  id                Int      @id @default(autoincrement())
  country           String
  city              String?
  province          String?
  town              String?
  no                String?
  postCode          String?
  street            String?
  building          String?
  doorNo            String?
  customer          Customer @relation(fields: [customerFirstName, customerLastName], references: [firstName, lastName])
  customerFirstName String
  customerLastName  String
}


enum PriceType {
  USD
  TL
  EUR
}


model Machinery {
  id Int @id @default(autoincrement())
  name String 
  models Model[]
  image Images?
}

model Unit {
  id Int @id @default(autoincrement())
  name String
  part Part[]
  model Model? @relation(fields: [modelId], references: [id])
  modelId Int?
}


model Part {
  id Int @id @default(autoincrement())
  name String
  unit Unit[]
  image Images?

}

model Model {
  id Int @id @default(autoincrement())
  name String @unique
  machinery Machinery? @relation(fields: [machineryId], references: [id])
  machineryId Int?
  units Unit[]
}

// i18n 
model Site {
  id Int @id @default(autoincrement())
  name String
  valueTr String
  valueEng String
  valueBul String
}

model Images {
  id Int @id @default(autoincrement())
  src String? 
  alt String?
  machinery Machinery? @relation(fields: [machineryId], references: [id])
  machineryId Int?

  part Part? @relation( fields: [partId], references: [id])
  partId Int?
}
